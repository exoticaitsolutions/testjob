# Deployment on AWS EC2

### Launch an EC2 Instance

1. Open the EC2 Dashboard in the AWS Management Console.
2. Launch a new instance with an Amazon Linux 2 AMI.
3. In the **Configure Instance** step, expand the **Advanced Details** section and add the following user data script:

    ```sh
    #!/bin/bash
    sudo yum update -y
    sudo yum install -y docker python3 httpd
    sudo service docker start
    sudo systemctl start httpd
    sudo systemctl enable httpd
    sudo usermod -a -G docker ec2-user
    ```

4. Complete the configuration and launch the instance.

### Connect to the EC2 Instance

1. Connect to your EC2 instance using SSH:

    ```sh
    ssh -i "your-key-pair.pem" ec2-user@your-ec2-instance-public-dns
    ```

### Verify Docker Image

1. Verify that the Docker image is available:

    ```sh
    docker images
    ```

    You should see `rohitashaery/python_docker_repo` with the `stock-analysis_latest` tag or the correct image ID.

### Create an Output Directory on the Host

1. Create a directory on the host to store the output files:

    ```sh
    mkdir output
    ```

### Run the Docker Container with Volume Mapping

1. Run the Docker container and map the host's `output` directory to the container's `/output` directory:
    ```sh
    docker run -it --rm -v $(pwd)/output:/output --name stock_analysis rohitashaery/python_docker_repo:stock-analysis_latest
    ```

### Copy Output Files to Web Server Directory

1. Copy the output files to the web server's root directory:

    ```sh
    sudo cp -r output /var/www/html/output
    ```

### Access the Output Files

1. Open a web browser and navigate to:

    ```sh
    http://your-ec2-instance-public-dns/output
    ```

By following these steps, the output files generated by the Docker container will be accessible via HTTP, allowing you to download them to your local system.
